<form [formGroup]="form" (ngSubmit)="onSubmit()" fxLayout="col wrap mb-0" class="user-form standing-report">
  <div fxLayout="row wrap" fxLayoutGap="11" fxLayoutAlign="start" class="w-100">
    <div fxFlex="none">
      <mat-form-field appearance="outline" class="date-picker">
        <mat-label>Upto</mat-label>
        <input matInput [matDatepicker]="upto" formControlName="uptoDate" />
        <mat-datepicker-toggle matIconSuffix [for]="upto"></mat-datepicker-toggle>
        <mat-datepicker #upto></mat-datepicker>
        <mat-hint>DD/MM/YYYY</mat-hint>
      </mat-form-field>
    </div>
    <div fxFlex="none">
      <app-multi-select
        class="dropdown"
        formControlName="exchange"
        [labelName]="'Select Exchange'"
        [dataList]="exchangeDDLList"
      ></app-multi-select>
    </div>
    <div fxFlex="none">
      <app-multi-select
        class="dropdown"
        formControlName="branch"
        [labelName]="'Select Branch'"
        [dataList]="branchDDLList"
      ></app-multi-select>
    </div>
    <div fxFlex="none">
      <app-multi-select
        class="dropdown account-dropdown"
        formControlName="account"
        [labelName]="'Select Account'"
        [dataList]="accountDDLList"
      ></app-multi-select>
    </div>
    <div fxFlex="none">
      <div class="type-options">
        <mat-radio-group formControlName="option" fxLayout="row" fxLayoutGap="10px">
          <mat-radio-button value="PartyWise">PartyWise</mat-radio-button>
          <mat-radio-button value="SaudaWise">Sauda Wise</mat-radio-button>
          <mat-radio-button value="Summary">Summary</mat-radio-button>
        </mat-radio-group>
      </div>
    </div>
    <div fxFlex="none">
      <button
        mat-icon-button
        class="filter-btn"
        type="button"
        aria-label="Advanced Filter"
        matTooltip="Advance Filter"
        (click)="openAdvancedFilter()"
      >
        <mat-icon>filter_alt</mat-icon>
      </button>
    </div>
    <div fxFlex="none">
      <button mat-raised-button color="primary" type="submit" class="show-btn">
        Show
      </button>
    </div>
    <div fxFlex="none">
      <mat-form-field appearance="outline" class="filter-control">
        <mat-label>Filter Search Result</mat-label>
        <input
          matInput
          id="filter-text-box"
          placeholder="Filter Search Result"
          (input)="onFilteredChanged()"
        />
        <mat-icon class="search-ico">search</mat-icon>
      </mat-form-field>
    </div>
    <div class="btn-block">
      <button class="export-btn" (click)="downloadAsPDF()">
        <img src="img/pdf.png" alt="" />
      </button>
      <button class="export-btn" (click)="onBtnExportCsv()">
        <img src="img/csv.png" alt="" />
      </button>
    </div>
  </div>

  <ng-template #advancedFilterDialog>
    <h2 mat-dialog-title>Advanced Filter</h2>
    <mat-dialog-content class="advanced-filter-content">
      <mat-form-field appearance="outline" class="status-field">
        <mat-label>Status</mat-label>
        <mat-select formControlName="approvalStatus">
          <mat-option value="All Items">All Items</mat-option>
          <mat-option value="Approved">Approved</mat-option>
          <mat-option value="NotApproved">NotApproved</mat-option>
        </mat-select>
      </mat-form-field>
      <div class="avg-options mt-2">
        <mat-radio-group formControlName="avgOption" fxLayout="row" fxLayoutGap="10px">
          <mat-radio-button value="withoutAvg">Without AVG</mat-radio-button>
          <mat-radio-button value="withAvg">With AVG</mat-radio-button>
          <mat-radio-button value="netRate">Net Rate</mat-radio-button>
        </mat-radio-group>
      </div>
      <div class="checkbox-group mt-2" fxLayout="row" fxLayoutGap="10px" fxLayoutWrap>
        <mat-checkbox formControlName="margin">Margin</mat-checkbox>
        <mat-checkbox formControlName="brokerWise">Broker Wise</mat-checkbox>
        <mat-checkbox formControlName="settlementWise">Settlement Wise</mat-checkbox>
        <mat-checkbox formControlName="withSharing">with sharing</mat-checkbox>
        <mat-checkbox formControlName="withAgeing">with Ageing</mat-checkbox>
        <mat-checkbox formControlName="withLedgerBal">With Ledger Bal</mat-checkbox>
      </div>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close type="button">Cancel</button>
      <button mat-raised-button color="primary" type="button" (click)="applyAdvancedFilter()">
        Apply
      </button>
    </mat-dialog-actions>
  </ng-template>
</form>

<div class="grid-wrapper">
  <ag-grid-angular
    class="ag-theme-alpine full-grid"
    [rowData]="gridDataList"
    [pagination]="true"
    [rowHeight]="31"
    [columnDefs]="columnDefs"
    [defaultColDef]="agGridOptions.defaultColDef"
    [gridOptions]="agGridOptions"
    (gridReady)="onGridReady($event)"
  ></ag-grid-angular>
</div>
