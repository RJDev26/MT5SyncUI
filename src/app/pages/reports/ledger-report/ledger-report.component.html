<form [formGroup]="form" (ngSubmit)="onSubmit()" fxLayout="col wrap mb-0" class="user-form ledger-report">
  <div fxLayout="row wrap" fxLayoutGap="11" fxLayoutAlign="start" class="w-100">
    <div fxFlex="none">
      <mat-form-field appearance="outline" class="date-picker">
        <mat-label>From Date</mat-label>
        <input matInput [matDatepicker]="fromPicker" formControlName="fromDate" />
        <mat-datepicker-toggle matIconSuffix [for]="fromPicker"></mat-datepicker-toggle>
        <mat-datepicker #fromPicker></mat-datepicker>
        <mat-hint>DD/MM/YYYY</mat-hint>
      </mat-form-field>
    </div>
    <div fxFlex="none">
      <mat-form-field appearance="outline" class="date-picker">
        <mat-label>To Date</mat-label>
        <input matInput [matDatepicker]="toPicker" formControlName="toDate" />
        <mat-datepicker-toggle matIconSuffix [for]="toPicker"></mat-datepicker-toggle>
        <mat-datepicker #toPicker></mat-datepicker>
        <mat-hint>DD/MM/YYYY</mat-hint>
      </mat-form-field>
    </div>
    <div fxFlex="none">
      <app-multi-select formControlName="branch" [labelName]="'Select Branch'" [dataList]="branchDDLList"></app-multi-select>
    </div>
    <div fxFlex="none">
      <app-multi-select
        class="account-dropdown"
        formControlName="account"
        [labelName]="'Select Account'"
        [dataList]="accountDDLList"
      ></app-multi-select>
    </div> 
    <div fxFlex="none">
      <button mat-raised-button color="primary" type="submit" class="show-btn">Show</button>
    </div>
    <div fxFlex="none">
      <button
        mat-icon-button
        class="filter-btn"
        type="button"
        aria-label="Advanced Filter"
        matTooltip="Advance Filter"
        (click)="openAdvancedFilter()"
      >
        <mat-icon>filter_alt</mat-icon>
      </button>
    </div>   
    <div fxFlex="none">
      <div class="filter-control">
        <mat-form-field appearance="outline">
          <mat-label>Filter Search Result</mat-label>
          <input
            matInput
            id="filter-text-box"
            placeholder="Filter Search Result"
            (input)="onFilteredChanged()"
          />
          <mat-icon class="search-ico">search</mat-icon>
        </mat-form-field>
      </div>
    </div>
    <div class="btn-block">
      <button class="export-btn" type="button" (click)="downloadAsPDF()">
        <img src="img/pdf.png" alt="" />
      </button>
      <button class="export-btn" type="button" (click)="onBtnExportCsv()">
        <img src="img/csv.png" alt="" />
      </button>
    </div>
  </div> 

  <ng-template #advancedFilterDialog>
    <h2 mat-dialog-title>Advanced Filter</h2>
    <mat-dialog-content class="advanced-filter-content">
      <app-multi-select
        formControlName="vouType"
        [labelName]="'Select Vou Type'"
        [dataList]="vouTypeOptions"
        [labelKey]="'label'"
      ></app-multi-select>
      <div fxLayout="column" fxLayoutAlign="start start" class="mt-2">
        <mat-radio-group
          formControlName="settlementEntry"
          fxLayout="row"
          fxLayoutGap="10px"
        >
          <mat-radio-button value="Daily">Daily</mat-radio-button>
          <mat-radio-button value="WeekWise">WeekWise</mat-radio-button>
          <mat-radio-button value="WeekNet">WeekNet</mat-radio-button>
        </mat-radio-group>
      </div>
      <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign="start center" class="mt-2">
        <mat-radio-group formControlName="viewType" fxLayout="row" fxLayoutGap="10px">
          <mat-radio-button value="ExchangeWise">Exchange Wise</mat-radio-button>
          <mat-radio-button value="ClientWise">Client Wise</mat-radio-button>
        </mat-radio-group>
      </div>
      <mat-checkbox formControlName="includeOpBal" class="mt-2"
        >Include Opening Balance</mat-checkbox
      >
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close type="button">Cancel</button>
      <button
        mat-raised-button
        color="primary"
        type="button"
        (click)="applyAdvancedFilter()"
      >
        Apply
      </button>
    </mat-dialog-actions>
  </ng-template>
</form>

<div class="grid-wrapper">
  <ag-grid-angular
    class="ag-theme-alpine full-grid"
    [rowHeight]="28"
    [rowData]="gridDataList"
    [columnDefs]="columnDefs"
    [defaultColDef]="agGridOptions.defaultColDef"
    [gridOptions]="agGridOptions"
    [paginationPageSize]="pageSize"
    [pagination]="true"
    (gridReady)="onGridReady($event)"
  ></ag-grid-angular>
</div>
