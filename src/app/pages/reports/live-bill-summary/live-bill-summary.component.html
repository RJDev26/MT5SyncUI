<div fxLayout="row" fxLayoutAlign="end center">
    <div class="filter-control">
        <mat-form-field appearance="outline">
            <mat-label>Filter Search Result</mat-label>
            <input matInput id="filter-text-box" placeholder="Filter Search Result" (input)="onFilteredChanged()">
            <mat-icon class="search-ico">search</mat-icon>
        </mat-form-field>
    </div>
    <div class="btn-block">
        <button class="export-btn" (click)="downloadAsPDF()">
            <img src="img/pdf.png" alt="" />
        </button>
        <button class="export-btn" (click)="onBtnExportCsv()">
            <img src="img/csv.png" alt="" />
        </button>
    </div>
</div>
<form [formGroup]="form" (ngSubmit)="onSubmit(form.value)" fxLayout="col wrap" class="user-form bill-summary">
    <div fxLayout="row wrap" fxLayoutGap="11" fxLayoutAlign="start" class="w-100">
        <div fxFlex="none">
            <mat-form-field appearance="outline">
                <mat-label>Select From - To</mat-label>
                <mat-date-range-input [rangePicker]="picker">
                    <input matStartDate formControlName="fromDate" placeholder="Start date">
                    <input matEndDate formControlName="toDate" placeholder="End date">
                </mat-date-range-input>
                <mat-hint>DD/MM/YYYY - DD/MM/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
            </mat-form-field>
        </div>
        <div fxFlex="none">
            <app-multi-select
                formControlName="branchIds"
                [labelName]="'Select Branch'"
                [dataList]="branchDDLList"
                formCont></app-multi-select>
        </div>
        <div fxFlex="none">
            <app-multi-select
                formControlName="exId"
                [labelName]="'Select Exchange'"
                [dataList]="exchangeDDLList"
                formCont></app-multi-select>
        </div>
        <div fxFlex="none">
            <app-multi-select
                class="account-dropdown"
                formControlName="account"
                [labelName]="'Select Account'"
                [dataList]="accountDDLList"
                formCont></app-multi-select>
        </div>
        <div fxFlex="none" class="text-center">
            <button mat-raised-button color="primary" class="uppercase mx-1" type="submit">Search</button>
            <button mat-raised-button color="accent" class="uppercase mx-1" type="button" (click)="onUpdateData()">Update Data</button>
            <mat-checkbox class="mx-1" [(ngModel)]="autoUpdateEnabled" (change)="onAutoUpdateChange()" [ngModelOptions]="{standalone: true}">Auto Update</mat-checkbox>
        </div>
        <span fxFlex></span>
    </div>
</form>
<mat-tab-group class="tab-group" (selectedIndexChange)="onTabChange($event)" [selectedIndex]="selectedTabIndex">
    <mat-tab label="Detail">
        <div class="tab-content mt-2">
            <ag-grid-angular class="ag-theme-alpine bill-summary-table full-grid"
                [rowData]="detailDataList"
                [pagination]="true"
                [rowHeight]="31"
                [columnDefs]="detailColumnDefs"
                [defaultColDef]="agGridOptions.defaultColDef"
                (gridReady)="onDetailGridReady($event)">
            </ag-grid-angular>
        </div>
    </mat-tab>
    <mat-tab label="Summary">
        <div class="tab-content mt-2">
            <ag-grid-angular class="ag-theme-alpine bill-summary-table full-grid"
                [rowData]="summaryDataList"
                [pinnedBottomRowData]="summaryTotals"
                [pagination]="true"
                [rowHeight]="31"
                [columnDefs]="summaryColumnDefs"
                [defaultColDef]="agGridOptions.defaultColDef"
                (gridReady)="onSummaryGridReady($event)">
            </ag-grid-angular>
        </div>
    </mat-tab>
    <mat-tab label="Missing Rate">
        <div class="tab-content mt-2">
            <ag-grid-angular class="ag-theme-alpine bill-summary-table full-grid"
                [rowData]="missingRateDataList"
                [pagination]="true"
                [rowHeight]="31"
                [columnDefs]="missingRateColumnDefs"
                [defaultColDef]="agGridOptions.defaultColDef"
                (gridReady)="onMissingRateGridReady($event)">
            </ag-grid-angular>
        </div>
    </mat-tab>
</mat-tab-group>
